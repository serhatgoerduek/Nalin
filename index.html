<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Nalin üíò</title>
  <style>
    :root{
      --bg1:#ff4d6d;
      --bg2:#ffb3c7;
      --card: rgba(255,255,255,.18);
      --border: rgba(255,255,255,.28);
      --text:#fff;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      height:100svh;
      display:grid;
      place-items:center;
      padding:18px;
      overflow:hidden;
      color:var(--text);
      text-align:center;
      background:
        radial-gradient(900px 700px at 20% 10%, rgba(255,255,255,.18), transparent 60%),
        radial-gradient(900px 700px at 80% 30%, rgba(255,183,3,.14), transparent 60%),
        linear-gradient(135deg,var(--bg1),var(--bg2));
    }
    .card{
      width:min(560px, 100%);
      background:var(--card);
      border:1px solid var(--border);
      backdrop-filter: blur(18px);
      border-radius:26px;
      box-shadow:0 25px 60px rgba(0,0,0,.30);
      padding:34px 22px 22px;
      position:relative;
      overflow:hidden;
    }
    h1{ margin:0 0 10px; font-size:28px; }
    p{ margin:0 0 8px; opacity:.92; }
    h2{ margin:10px 0 0; font-size:20px; font-weight:900; }

    .btnRow{
      margin-top:18px;
      display:flex;
      justify-content:center;
      gap:12px;
      flex-wrap:wrap;
      min-height:54px;
      position:relative;
    }

    button{
      border:0;
      border-radius:14px;
      padding:12px 22px;
      font-size:16px;
      font-weight:900;
      cursor:pointer;
      user-select:none;
      transition: transform .12s ease, filter .12s ease, left .12s ease, top .12s ease;
    }
    button:active{ transform: translateY(1px) scale(.99); }

    .yes{
      background:#fff;
      color:#ff2d55;
      box-shadow:0 16px 30px rgba(0,0,0,.18);
    }
    .yes:hover{ transform: scale(1.03); filter:brightness(1.03); }

    /* ‚úÖ Nein startet NORMAL im Button-Row (fixed position) */
    .no{
      background: rgba(255,255,255,.28);
      color:#fff;
      border:1px solid rgba(255,255,255,.22);
    }
    .no:hover{ transform:none; filter:none; }

    /* ‚úÖ Ab dem 1. Klick bekommt er "floating"-Mode innerhalb der Card */
    .no.floating{
      position:absolute;      /* relativ zur Card */
      z-index:5;
    }

    .result{
      display:none;
      margin-top:18px;
      font-size:18px;
      line-height:1.35;
      padding:14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(0,0,0,.10);
    }
    .spotify{
      display:none;
      margin-top:14px;
      position:relative;
      z-index:2;
    }
    iframe{
      width:100%;
      height:152px;
      border:0;
      border-radius:16px;
    }

    .heart{
      position:fixed;
      bottom:-20px;
      font-size:22px;
      animation:floatUp 4s linear forwards;
      pointer-events:none;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.25));
      z-index:999;
    }
    @keyframes floatUp{
      to{ transform:translateY(-110vh); opacity:0; }
    }
  </style>
</head>

<body>
  <main class="card" id="card">
    <h1>Nalin‚Ä¶ üíò</h1>
    <p>Ich mach‚Äôs kurz und ehrlich üòå</p>
    <h2>Willst du mein Valentine sein? üåπ</h2>

    <div class="btnRow" id="btnRow">
      <button class="yes" id="yesBtn">Ja üíñ</button>
      <button class="no" id="noBtn">Nein üôà</button>
    </div>

    <div class="result" id="result">
      Du bist ein G ‚ù§Ô∏è
    </div>

    <div class="spotify" id="spotify">
      <iframe
        id="spotifyFrame"
        src=""
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
      </iframe>
    </div>
  </main>

<script>
  const card = document.getElementById("card");
  const btnRow = document.getElementById("btnRow");
  const noBtn = document.getElementById("noBtn");
  const yesBtn = document.getElementById("yesBtn");
  const result = document.getElementById("result");
  const spotify = document.getElementById("spotify");
  const spotifyFrame = document.getElementById("spotifyFrame");

  const PAD = 14;
  let noHasMoved = false;

  function rand(min, max){ return Math.random()*(max-min)+min; }

  function jumpNoInsideCard(){
    const cr = card.getBoundingClientRect();
    const bw = noBtn.offsetWidth  || 110;
    const bh = noBtn.offsetHeight || 48;

    const maxX = Math.max(PAD, cr.width  - bw - PAD);
    const maxY = Math.max(PAD, cr.height - bh - PAD);

    const x = rand(PAD, maxX);
    const y = rand(PAD + 85, maxY); // nicht in Titelbereich

    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
  }

  function activateNoFloatingMode(){
    if (noHasMoved) return;
    noHasMoved = true;

    // Button aus dem normalen Flow l√∂sen, aber IN der Card behalten
    noBtn.classList.add("floating");
    card.appendChild(noBtn);

    // erste Flucht-Position
    requestAnimationFrame(jumpNoInsideCard);
  }

  // Ab dem 1. Klick: floating aktivieren + springen
  noBtn.addEventListener("click", (e)=>{
    e.preventDefault();
    activateNoFloatingMode();
    jumpNoInsideCard();
  });

  noBtn.addEventListener("touchstart", (e)=>{
    e.preventDefault();
    activateNoFloatingMode();
    jumpNoInsideCard();
  }, {passive:false});

  yesBtn.addEventListener("click", ()=>{
    result.style.display = "block";
    spotify.style.display = "block";
    yesBtn.disabled = true;
    yesBtn.textContent = "Ja üíñ";
    noBtn.disabled = true;

    for(let i=0;i<26;i++){
      const h=document.createElement("div");
      h.className="heart";
      h.textContent=["üíñ","üíò","üíï","üåπ","‚ú®"][Math.floor(Math.random()*5)];
      h.style.left=(Math.random()*100)+"vw";
      h.style.animationDuration=(3+Math.random()*2)+"s";
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), 4000);
    }

    spotifyFrame.src = "https://open.spotify.com/embed/track/3U5JVgI2x4rDyHGObzJfNf?utm_source=generator&autoplay=1";
  });

  window.addEventListener("resize", ()=>{
    if(noHasMoved && !noBtn.disabled) jumpNoInsideCard();
  });
</script>
</body>
</html>
