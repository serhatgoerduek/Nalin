<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Nalin ðŸ’˜</title>

  <style>
    :root{
      --bg1:#ff4d6d;
      --bg2:#ffb3c7;
      --card: rgba(255,255,255,.18);
      --border: rgba(255,255,255,.28);
      --text:#fff;
    }
    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:-apple-system,BlinkMacSystemFont,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      height:100svh;
      display:grid;
      place-items:center;
      padding:18px;
      overflow:hidden;
      color:var(--text);
      text-align:center;
      background:
        radial-gradient(900px 700px at 20% 10%, rgba(255,255,255,.18), transparent 60%),
        radial-gradient(900px 700px at 80% 30%, rgba(255,183,3,.14), transparent 60%),
        linear-gradient(135deg,var(--bg1),var(--bg2));
    }

    .card{
      width:min(560px, 100%);
      background:var(--card);
      border:1px solid var(--border);
      backdrop-filter: blur(18px);
      border-radius:26px;
      box-shadow:0 25px 60px rgba(0,0,0,.30);
      padding:34px 22px 22px;
      position:relative;
      overflow:hidden;
    }

    h1{ margin:0 0 10px; font-size:28px; }
    p{ margin:0 0 8px; opacity:.92; }
    h2{ margin:10px 0 0; font-size:20px; font-weight:900; }

    .btnRow{
      margin-top:18px;
      display:flex;
      justify-content:center;
      gap:12px;
      flex-wrap:wrap;
      min-height:60px;
      position:relative;
      z-index:2;
    }

    button{
      border:0;
      border-radius:14px;
      padding:12px 22px;
      font-size:16px;
      font-weight:900;
      cursor:pointer;
      user-select:none;
      transition: transform .12s ease, filter .12s ease, left .12s ease, top .12s ease;
    }
    button:active{ transform: translateY(1px) scale(.99); }

    .yes{
      background:#fff;
      color:#ff2d55;
      box-shadow:0 16px 30px rgba(0,0,0,.18);
    }
    .yes:hover{ transform: scale(1.03); filter:brightness(1.03); }

    /* âœ… Nein ist IMMER absolut innerhalb der Card -> kann nicht verschwinden */
    .no{
      position:absolute;
      background: rgba(255,255,255,.28);
      color:#fff;
      border:1px solid rgba(255,255,255,.22);
      z-index:5;
    }
    .no:hover{ transform:none; filter:none; } /* kein grÃ¶ÃŸer werden */

    .result{
      display:none;
      margin-top:18px;
      font-size:18px;
      line-height:1.35;
      padding:14px;
      border-radius:18px;
      border:1px solid rgba(255,255,255,.22);
      background: rgba(0,0,0,.10);
      z-index:2;
      position:relative;
    }

    .spotify{
      display:none;
      margin-top:14px;
      position:relative;
      z-index:2;
    }
    iframe{
      width:100%;
      height:152px;
      border:0;
      border-radius:16px;
    }

    .heart{
      position:fixed;
      bottom:-20px;
      font-size:22px;
      animation:floatUp 4s linear forwards;
      pointer-events:none;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.25));
      z-index:999;
    }
    @keyframes floatUp{
      to{ transform:translateY(-110vh); opacity:0; }
    }
  </style>
</head>

<body>
  <main class="card" id="card">
    <h1>Nalinâ€¦ ðŸ’˜</h1>
    <p>Ich machâ€™s kurz und ehrlich ðŸ˜Œ</p>
    <h2>Willst du mein Valentine sein? ðŸŒ¹</h2>

    <div class="btnRow" id="btnRow">
      <button class="yes" id="yesBtn">Ja ðŸ’–</button>
      <!-- â€žNeinâ€œ steht NICHT im Layout, wird daneben positioniert -->
      <span style="display:none" id="noPlaceholder"></span>
    </div>

    <div class="result" id="result">
      Du bist ein G âœ¨ðŸŒ¹
    </div>

    <div class="spotify" id="spotify">
      <iframe
        id="spotifyFrame"
        src=""
        allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
      </iframe>
    </div>

    <!-- âœ… echter Nein Button (absolut in Card) -->
    <button class="no" id="noBtn">Nein ðŸ¤¨</button>
  </main>

<script>
  const card = document.getElementById("card");
  const btnRow = document.getElementById("btnRow");
  const yesBtn = document.getElementById("yesBtn");
  const noBtn  = document.getElementById("noBtn");

  const result = document.getElementById("result");
  const spotify = document.getElementById("spotify");
  const spotifyFrame = document.getElementById("spotifyFrame");

  const PAD = 14;
  let noActivated = false;

  function rand(min, max){ return Math.random()*(max-min)+min; }

  // âœ… Startposition: exakt neben dem Ja-Button (im btnRow)
  function placeNoNextToYes(){
    const cr = card.getBoundingClientRect();
    const yr = yesBtn.getBoundingClientRect();

    const bw = noBtn.getBoundingClientRect().width  || 110;
    const bh = noBtn.getBoundingClientRect().height || 48;

    // Ziel: rechts neben Ja, gleiche HÃ¶he
    let left = (yr.right - cr.left) + 12;           // 12px gap
    let top  = (yr.top   - cr.top)  + (yr.height - bh)/2;

    // innerhalb der Card halten
    left = Math.max(PAD, Math.min(left, cr.width  - bw - PAD));
    top  = Math.max(PAD, Math.min(top,  cr.height - bh - PAD));

    noBtn.style.left = left + "px";
    noBtn.style.top  = top  + "px";
  }

  // âœ… Springt immer innerhalb der Card (anklickbar)
  function jumpNoInsideCard(){
    const cr = card.getBoundingClientRect();
    const bw = noBtn.getBoundingClientRect().width  || 110;
    const bh = noBtn.getBoundingClientRect().height || 48;

    const maxX = Math.max(PAD, cr.width  - bw - PAD);
    const maxY = Math.max(PAD, cr.height - bh - PAD);

    const x = rand(PAD, maxX);
    const y = rand(PAD + 90, maxY); // nicht in Titelbereich

    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
  }

  // âœ… iPhone-safe initial placement (mehrere Layout-PÃ¤sse)
  function initNo(){
    placeNoNextToYes();
    setTimeout(placeNoNextToYes, 50);
    setTimeout(placeNoNextToYes, 200);
  }
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initNo);
  } else {
    initNo();
  }

  // Ab erstem Klick/Tap: aktivieren + springen
  function onNo(e){
    e.preventDefault();
    if (!noActivated) noActivated = true;
    jumpNoInsideCard();
  }
  noBtn.addEventListener("click", onNo);
  noBtn.addEventListener("touchstart", onNo, {passive:false});

  // Ja: Hearts + Spotify
  yesBtn.addEventListener("click", ()=>{
    result.style.display = "block";
    spotify.style.display = "block";
    yesBtn.disabled = true;
    yesBtn.textContent = "Ja ðŸ’–";
    noBtn.disabled = true;

    for(let i=0;i<26;i++){
      const h=document.createElement("div");
      h.className="heart";
      h.textContent=["ðŸ’–","ðŸ’˜","ðŸ’•","ðŸŒ¹","âœ¨"][Math.floor(Math.random()*5)];
      h.style.left=(Math.random()*100)+"vw";
      h.style.animationDuration=(3+Math.random()*2)+"s";
      document.body.appendChild(h);
      setTimeout(()=>h.remove(), 4000);
    }

    spotifyFrame.src = "https://open.spotify.com/embed/track/3U5JVgI2x4rDyHGObzJfNf?utm_source=generator&autoplay=1";
  });

  // Bei Rotation/Resize: Startposition wieder korrekt setzen (falls noch nicht aktiviert)
  window.addEventListener("resize", ()=>{
    if (!noActivated && !noBtn.disabled) placeNoNextToYes();
    if (noActivated && !noBtn.disabled) jumpNoInsideCard();
  });
</script>
</body>
</html>
